{% extends "base.html" %}
{% block title %}ã‚¤ãƒ™ãƒ³ãƒˆã®ä½œæˆ{% endblock %}

{% block content %}
<h2>ã‚¤ãƒ™ãƒ³ãƒˆã®ä½œæˆ</h2>

<!-- ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ -->
{% if error %}
  <div class="alert alert-danger">{{ error }}</div>
{% endif %}

<!-- ğŸ”¹ ãƒãƒ¼ãƒ ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼ -->
<form method="GET" id="teamFilterForm" class="mb-4">
  <div class="col-md-4">
    <label>ãƒãƒ¼ãƒ åã§çµã‚Šè¾¼ã¿</label>
    <select name="team" class="form-select" multiple onchange="document.getElementById('teamFilterForm').submit()">
      {% for t in teams %}
        <option value="{{ t }}" {% if t in selected_teams %}selected{% endif %}>{{ t }}</option>
      {% endfor %}
    </select>
  </div>
</form>

<!-- ğŸ”¹ ã‚¤ãƒ™ãƒ³ãƒˆç™»éŒ²ãƒ•ã‚©ãƒ¼ãƒ  -->
<form method="POST">
  <div class="mb-3">
    <label>æ—¥ä»˜</label>
    <input type="date" name="date" class="form-control" required>
  </div>

  <div class="mb-3">
    <label>ã‚¤ãƒ™ãƒ³ãƒˆåï¼ˆæ—¢å­˜ã‹ã‚‰é¸ã¶ï¼‰</label>
    <select id="event_select" class="form-select mb-2" onchange="document.getElementById('event_input').value = this.value">
      <option value="">é¸æŠã—ã¦ãã ã•ã„</option>
      {% for e in existing_events %}
        <option value="{{ e }}">{{ e }}</option>
      {% endfor %}
    </select>

    <label>ã¾ãŸã¯æ–°ã—ã„ã‚¤ãƒ™ãƒ³ãƒˆåã‚’å…¥åŠ›</label>
    <input type="text" id="event_input" name="event" class="form-control" placeholder="ä¾‹ï¼šé€šå¸¸ç·´ç¿’ã€è©¦åˆ" required>
  </div>

  <!-- ğŸ”¹ å¯¾è±¡ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ä¸€è¦§ -->
  <div class="mb-3">
    <label>å¯¾è±¡ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ï¼ˆ{{ profiles|length }}åï¼‰</label>
    <ul class="list-group">
      {% for profile in profiles %}
        <li class="list-group-item">
          {{ profile.name }}ï¼ˆ{{ profile.team or "ç„¡æ‰€å±" }} / {{ profile.grade }}å¹´ï¼‰
        </li>
      {% endfor %}
    </ul>
  </div>

  <button type="submit" class="btn btn-primary">ã‚¤ãƒ™ãƒ³ãƒˆä½œæˆ</button>
  <a href="{{ url_for('view_attendance') }}" class="btn btn-outline-secondary">å‡ºæ¬ ç¢ºèªã¸æˆ»ã‚‹</a>
</form>
{% endblock %}
